{% extends 'base.html' %}
{% block pagetitle %}
    ToDo|List
{% endblock %}

<br>

{% block content %}
    {% if messages %}
        {% for message in messages %}
            <br>
            <div class="alert alert-warning alert-dismissible fade show" role="alert">
                {{message}}
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
            </div>
         {% endfor %}
    {% endif %}
<br/>
{% if board_list %}
    <ul class="nav nav-pills">
        {% for board in board_list %}
            {% if board_get_id == board.id %}
                <li class="nav-item"><a class="nav-link active" href="{% url 'board' board.id %}">{{ board.board_name }}</a></li>
            {% else %}
                <li class="nav-item"><a class="nav-link inactive-hover" href="{% url 'board' board.id %}">{{ board.board_name }}</a></li>
            {% endif %}
        {% endfor %}
    </ul>
    {% endif %}
    <p>
        {% if is_user_login %}
        {% if todo_list %}
    <table id="to_do_table" class="table table-bordered table-hover">
        <thead>
        <tr class="table-secondary">
            <th>No.</th>
            <th>Task Name</th>
            <th>Created On</th>
            <th>Cross/Uncross</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        {% for task in todo_list %}
        {% if task.completed %}
        <tr class="table-secondary">
            <th>{{ forloop.counter }}</th>
            <th class="cross-list contenteditable" contenteditable='false' class="cross-list">{{ task.item }}</th>
            <th>{{ task.created_date }}</th>
            <th><a href="{% url 'uncross' task.id %}">Uncross</a></th>
            <th><a href="{% url 'delete_item' task.id %}">Delete</a></th>
        </tr>
        {% else %}
        <tr>
            <th>{{ forloop.counter }}</th>
            <th class="contenteditable" contenteditable='false'>{{ task.item }}</th>
            <th>{{ task.created_date }}</th>
            <th><a href="{% url 'cross_off' task.id %}">Cross Off</a></th>
            <th><a href="{% url 'delete_item' task.id %}">Delete</a></th>
        </tr>
        {% endif %}
        {% endfor %}
        </tbody>
    </table>
    <div hidden>
        <form id="ajax_form_todo" action="/" method="post" class="form-inline my-2 my-lg-0">
            {% csrf_token %}
            <input id="custom_item" name="item" class="form-control mr-sm-2" type="text" placeholder="Add To Do item"
                   aria-label="Search">
            <button class="ajax_submit" type="submit"></button>
        </form>
    </div>
    {% else %}
    <h4 class="text-center">Add tasks to this Board using right input and start work</h4>
    {% endif %}
    {% else %}

    {% endif %}
    </p>
{% endblock %}

{% block nav_bar_right %}
{% if is_user_login %}
<form action="" method="post" name="add_task_form" class="form-inline my-2 my-lg-0">
    {% csrf_token %}
    <input name="item" class="add_item form-control mr-sm-2" type="text" placeholder="Add task to this Board"
           aria-label="Search">
    <input type="hidden" name="form_name" value="add_list">
    <button class="btn btn-outline-secondary my-2 my-sm-0" type="submit">Add To List</button>
        <li class="nav-item dropdown dropdown-main">
            <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink-333" data-toggle="dropdown"
               aria-haspopup="true" aria-expanded="false">
                My Profile
            </a>
            <div class="dropdown-menu dropdown-menu-right dropdown-default"
                 aria-labelledby="navbarDropdownMenuLink-333">
<!--                <a class="dropdown-item" href="#">My Profile</a>-->
                <a class="dropdown-item" href="{% url 'boards' %}">My Boards</a>
                <a class="dropdown-item" href="{% url 'logout' %}">Logout</a>
            </div>
        </li>
</form>
{% endif %}
{% endblock %}